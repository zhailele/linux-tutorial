<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Linux 系统管理 | LINUX-TUTORIAL</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/linux-tutorial/favicon.ico">
    <meta name="description" content="数据库教程">
    <link rel="preload" href="/linux-tutorial/assets/css/0.styles.6be8f526.css" as="style"><link rel="preload" href="/linux-tutorial/assets/js/app.6f4d68b8.js" as="script"><link rel="preload" href="/linux-tutorial/assets/js/4.2a06028f.js" as="script"><link rel="preload" href="/linux-tutorial/assets/js/29.b9183a65.js" as="script"><link rel="preload" href="/linux-tutorial/assets/js/5.c338e437.js" as="script"><link rel="prefetch" href="/linux-tutorial/assets/js/10.ef7f320d.js"><link rel="prefetch" href="/linux-tutorial/assets/js/11.4dc56e65.js"><link rel="prefetch" href="/linux-tutorial/assets/js/12.edb4fffc.js"><link rel="prefetch" href="/linux-tutorial/assets/js/13.45eb1e59.js"><link rel="prefetch" href="/linux-tutorial/assets/js/14.104d0759.js"><link rel="prefetch" href="/linux-tutorial/assets/js/15.4df86149.js"><link rel="prefetch" href="/linux-tutorial/assets/js/16.4316a000.js"><link rel="prefetch" href="/linux-tutorial/assets/js/17.e9c5c4d6.js"><link rel="prefetch" href="/linux-tutorial/assets/js/18.9d03370d.js"><link rel="prefetch" href="/linux-tutorial/assets/js/19.6caf75ab.js"><link rel="prefetch" href="/linux-tutorial/assets/js/20.65245cda.js"><link rel="prefetch" href="/linux-tutorial/assets/js/21.43d4aaea.js"><link rel="prefetch" href="/linux-tutorial/assets/js/22.cc4da834.js"><link rel="prefetch" href="/linux-tutorial/assets/js/23.70a55b13.js"><link rel="prefetch" href="/linux-tutorial/assets/js/24.ba8792fa.js"><link rel="prefetch" href="/linux-tutorial/assets/js/25.4673848f.js"><link rel="prefetch" href="/linux-tutorial/assets/js/26.de2e4201.js"><link rel="prefetch" href="/linux-tutorial/assets/js/27.9b9d52cc.js"><link rel="prefetch" href="/linux-tutorial/assets/js/28.36991895.js"><link rel="prefetch" href="/linux-tutorial/assets/js/30.964d9316.js"><link rel="prefetch" href="/linux-tutorial/assets/js/31.5d7acd0b.js"><link rel="prefetch" href="/linux-tutorial/assets/js/32.cb6ec300.js"><link rel="prefetch" href="/linux-tutorial/assets/js/33.695f098e.js"><link rel="prefetch" href="/linux-tutorial/assets/js/34.2b404c33.js"><link rel="prefetch" href="/linux-tutorial/assets/js/35.4829fcda.js"><link rel="prefetch" href="/linux-tutorial/assets/js/36.d90db845.js"><link rel="prefetch" href="/linux-tutorial/assets/js/37.030bc79a.js"><link rel="prefetch" href="/linux-tutorial/assets/js/38.0d812959.js"><link rel="prefetch" href="/linux-tutorial/assets/js/39.3185f22c.js"><link rel="prefetch" href="/linux-tutorial/assets/js/40.ddc5e73f.js"><link rel="prefetch" href="/linux-tutorial/assets/js/41.345532b3.js"><link rel="prefetch" href="/linux-tutorial/assets/js/42.5ecdf63b.js"><link rel="prefetch" href="/linux-tutorial/assets/js/43.b8354332.js"><link rel="prefetch" href="/linux-tutorial/assets/js/44.00359ef0.js"><link rel="prefetch" href="/linux-tutorial/assets/js/45.ab9ae4fa.js"><link rel="prefetch" href="/linux-tutorial/assets/js/46.24f09440.js"><link rel="prefetch" href="/linux-tutorial/assets/js/47.0bfee520.js"><link rel="prefetch" href="/linux-tutorial/assets/js/48.6793056d.js"><link rel="prefetch" href="/linux-tutorial/assets/js/49.bf619bfc.js"><link rel="prefetch" href="/linux-tutorial/assets/js/50.2aeb0195.js"><link rel="prefetch" href="/linux-tutorial/assets/js/51.ed33b609.js"><link rel="prefetch" href="/linux-tutorial/assets/js/52.1aeb4798.js"><link rel="prefetch" href="/linux-tutorial/assets/js/53.445caa1c.js"><link rel="prefetch" href="/linux-tutorial/assets/js/54.c01bb197.js"><link rel="prefetch" href="/linux-tutorial/assets/js/55.c5a8df9c.js"><link rel="prefetch" href="/linux-tutorial/assets/js/56.f87409cf.js"><link rel="prefetch" href="/linux-tutorial/assets/js/57.a82286e5.js"><link rel="prefetch" href="/linux-tutorial/assets/js/58.43e8e6d4.js"><link rel="prefetch" href="/linux-tutorial/assets/js/59.cff0f0df.js"><link rel="prefetch" href="/linux-tutorial/assets/js/6.cc5b1ba8.js"><link rel="prefetch" href="/linux-tutorial/assets/js/60.4313edfe.js"><link rel="prefetch" href="/linux-tutorial/assets/js/61.698062ca.js"><link rel="prefetch" href="/linux-tutorial/assets/js/62.15f5ab22.js"><link rel="prefetch" href="/linux-tutorial/assets/js/63.291e2da5.js"><link rel="prefetch" href="/linux-tutorial/assets/js/64.8f87bd8d.js"><link rel="prefetch" href="/linux-tutorial/assets/js/65.5bfaaa2b.js"><link rel="prefetch" href="/linux-tutorial/assets/js/66.15f25ebf.js"><link rel="prefetch" href="/linux-tutorial/assets/js/67.cc3c7c32.js"><link rel="prefetch" href="/linux-tutorial/assets/js/68.d7057df7.js"><link rel="prefetch" href="/linux-tutorial/assets/js/7.9e1f57f7.js"><link rel="prefetch" href="/linux-tutorial/assets/js/8.e325b9eb.js"><link rel="prefetch" href="/linux-tutorial/assets/js/9.3ca3e2bf.js"><link rel="prefetch" href="/linux-tutorial/assets/js/vendors~flowchart.0faa5ee3.js"><link rel="prefetch" href="/linux-tutorial/assets/js/vendors~notification.9d6c9654.js">
    <link rel="stylesheet" href="/linux-tutorial/assets/css/0.styles.6be8f526.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/linux-tutorial/" class="home-link router-link-active"><img src="images/dunwu-logo-100.png" alt="LINUX-TUTORIAL" class="logo"> <span class="site-name can-hide">LINUX-TUTORIAL</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/linux-tutorial/linux/cli/" class="nav-link router-link-active">
  Linux 命令
</a></div><div class="nav-item"><a href="/linux-tutorial/linux/ops/" class="nav-link">
  Linux 运维
</a></div><div class="nav-item"><a href="/linux-tutorial/linux/soft/" class="nav-link">
  Linux 软件运维
</a></div><div class="nav-item"><a href="/linux-tutorial/docker/" class="nav-link">
  Docker 教程
</a></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  🎯 博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/dunwu/linux-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/linux-tutorial/linux/cli/" class="nav-link router-link-active">
  Linux 命令
</a></div><div class="nav-item"><a href="/linux-tutorial/linux/ops/" class="nav-link">
  Linux 运维
</a></div><div class="nav-item"><a href="/linux-tutorial/linux/soft/" class="nav-link">
  Linux 软件运维
</a></div><div class="nav-item"><a href="/linux-tutorial/docker/" class="nav-link">
  Docker 教程
</a></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  🎯 博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/dunwu/linux-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Linux 系统管理</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/linux-tutorial/linux/cli/linux-cli-system.html#_1-linux-系统管理要点" class="sidebar-link">1. Linux 系统管理要点</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/linux-tutorial/linux/cli/linux-cli-system.html#_2-命令常见用法" class="sidebar-link">2. 命令常见用法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/cli/linux-cli-system.html#_2-1-lsb-release" class="sidebar-link">2.1. lsb_release</a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/cli/linux-cli-system.html#_2-2-reboot" class="sidebar-link">2.2. reboot</a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/cli/linux-cli-system.html#_2-3-exit" class="sidebar-link">2.3. exit</a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/cli/linux-cli-system.html#_2-4-shutdown" class="sidebar-link">2.4. shutdown</a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/cli/linux-cli-system.html#_2-5-date" class="sidebar-link">2.5. date</a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/cli/linux-cli-system.html#_2-6-mount" class="sidebar-link">2.6. mount</a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/cli/linux-cli-system.html#_2-7-umount" class="sidebar-link">2.7. umount</a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/cli/linux-cli-system.html#_2-8-ps" class="sidebar-link">2.8. ps</a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/cli/linux-cli-system.html#_2-9-kill" class="sidebar-link">2.9. kill</a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/cli/linux-cli-system.html#_2-10-systemctl" class="sidebar-link">2.10. systemctl</a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/cli/linux-cli-system.html#_2-11-service" class="sidebar-link">2.11. service</a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/cli/linux-cli-system.html#_2-12-crontab" class="sidebar-link">2.12. crontab</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="linux-系统管理"><a href="#linux-系统管理" class="header-anchor">#</a> Linux 系统管理</h1> <blockquote><p>关键词：<code>lsb_release</code>, <code>reboot</code>, <code>exit</code>, <code>shutdown</code>, <code>date</code>, <code>mount</code>, <code>umount</code>, <code>ps</code>, <code>kill</code>, <code>systemctl</code>, <code>service</code>, <code>crontab</code></p></blockquote> <h2 id="_1-linux-系统管理要点"><a href="#_1-linux-系统管理要点" class="header-anchor">#</a> 1. Linux 系统管理要点</h2> <ul><li>查看 Linux 系统发行版本
<ul><li>使用 <a href="#lsb_release">lsb_release</a>（此命令适用于所有的 Linux 发行版本）</li> <li>使用 <code>cat /etc/redhat-release</code>（此方法只适合 Redhat 系的 Linux）</li></ul></li> <li>查看 CPU 信息 - 使用 <code>cat /proc/cpuinfo</code></li> <li>重新启动 Linux 操作系统 - 使用 <a href="#reboot">reboot</a></li> <li>退出 shell，并返回给定值 - 使用 <a href="#exit">exit</a></li> <li>关闭系统 - 使用 <a href="#shutdown">shutdown</a></li> <li>查看或设置系统时间与日期 - 使用 <a href="#date">date</a></li> <li>挂载文件系统 - 使用 <a href="#mount">mount</a></li> <li>取消挂载文件系统 - 使用 <a href="#umount">umount</a></li> <li>查看系统当前进程状态 - 使用 <a href="#ps">ps</a></li> <li>删除当前正在运行的进程 - 使用 <a href="#kill">kill</a></li> <li>启动、停止、重启、关闭、显示系统服务（Centos7），使用 <a href="#systemctl">systemctl</a></li> <li>启动、停止、重启、关闭、显示系统服务（Centos7 以前），使用 <a href="#service">service</a></li> <li>管理需要周期性执行的任务，使用 <a href="#crontab">crontab</a></li></ul> <h2 id="_2-命令常见用法"><a href="#_2-命令常见用法" class="header-anchor">#</a> 2. 命令常见用法</h2> <h3 id="_2-1-lsb-release"><a href="#_2-1-lsb-release" class="header-anchor">#</a> 2.1. lsb_release</h3> <p>lsb_release 不是 bash 默认命令，如果要使用，需要先安装。</p> <p>安装方法：</p> <ol><li>执行 <code>yum provides lsb_release</code>，查看支持 lsb_release 命令的包。</li> <li>选择合适版本，执行类似这样的安装命令：<code>yum install -y redhat-lsb-core-4.1-27.el7.centos.1.x86_64</code></li></ol> <h3 id="_2-2-reboot"><a href="#_2-2-reboot" class="header-anchor">#</a> 2.2. reboot</h3> <blockquote><p>reboot 命令用来重新启动正在运行的 Linux 操作系统。</p> <p>参考：http://man.linuxde.net/reboot</p></blockquote> <p>示例：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">reboot</span>        <span class="token comment"># 重开机。</span>
<span class="token function">reboot</span> -w     <span class="token comment"># 做个重开机的模拟（只有纪录并不会真的重开机）。</span>
</code></pre></div><h3 id="_2-3-exit"><a href="#_2-3-exit" class="header-anchor">#</a> 2.3. exit</h3> <blockquote><p>exit 命令同于退出 shell，并返回给定值。在 shell 脚本中可以终止当前脚本执行。执行 exit 可使 shell 以指定的状态值退出。若不设置状态值参数，则 shell 以预设值退出。状态值 0 代表执行成功，其他值代表执行失败。</p> <p>参考：http://man.linuxde.net/exit</p></blockquote> <p>示例：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 退出当前 shell</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># exit</span>
<span class="token builtin class-name">logout</span>

<span class="token comment"># 在脚本中，进入脚本所在目录，否则退出</span>
<span class="token builtin class-name">cd</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">dirname</span> $0<span class="token variable">)</span></span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span> <span class="token number">1</span>

<span class="token comment"># 在脚本中，判断参数数量，不匹配就打印使用方式，退出</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$#</span>&quot;</span> -ne <span class="token string">&quot;2&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;usage: <span class="token variable">$0</span> &lt;area&gt; &lt;hours&gt;&quot;</span>
    <span class="token builtin class-name">exit</span> <span class="token number">2</span>
<span class="token keyword">fi</span>

<span class="token comment"># 在脚本中，退出时删除临时文件</span>
<span class="token builtin class-name">trap</span> <span class="token string">&quot;rm -f tmpfile; echo Bye.&quot;</span> EXIT

<span class="token comment"># 检查上一命令的退出码</span>
./mycommand.sh
<span class="token assign-left variable">EXCODE</span><span class="token operator">=</span><span class="token variable">$?</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$EXCODE</span>&quot;</span> <span class="token operator">==</span> <span class="token string">&quot;0&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;O.K&quot;</span>
<span class="token keyword">fi</span>
</code></pre></div><h3 id="_2-4-shutdown"><a href="#_2-4-shutdown" class="header-anchor">#</a> 2.4. shutdown</h3> <blockquote><p>shutdown 命令用来系统关机命令。shutdown 指令可以关闭所有程序，并依用户的需要，进行重新开机或关机的动作。</p> <p>参考：http://man.linuxde.net/shutdown</p></blockquote> <p>示例：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 指定现在立即关机</span>
<span class="token function">shutdown</span> -h now

<span class="token comment"># 指定 5 分钟后关机，同时送出警告信息给登入用户</span>
<span class="token function">shutdown</span> +5 <span class="token string">&quot;System will shutdown after 5 minutes&quot;</span>
</code></pre></div><h3 id="_2-5-date"><a href="#_2-5-date" class="header-anchor">#</a> 2.5. date</h3> <blockquote><p>date 命令是显示或设置系统时间与日期。</p> <p>参考：http://man.linuxde.net/date</p></blockquote> <p>示例：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 格式化输出</span>
<span class="token function">date</span> +<span class="token string">&quot;%Y-%m-%d&quot;</span>
<span class="token number">2009</span>-12-07

<span class="token comment"># 输出昨天日期</span>
<span class="token function">date</span> -d <span class="token string">&quot;1 day ago&quot;</span> +<span class="token string">&quot;%Y-%m-%d&quot;</span>
<span class="token number">2012</span>-11-19

<span class="token comment"># 2 秒后输出</span>
<span class="token function">date</span> -d <span class="token string">&quot;2 second&quot;</span> +<span class="token string">&quot;%Y-%m-%d %H:%M.%S&quot;</span>
<span class="token number">2012</span>-11-20 <span class="token number">14</span>:21.31

<span class="token comment"># 传说中的 1234567890 秒</span>
<span class="token function">date</span> -d <span class="token string">&quot;1970-01-01 1234567890 seconds&quot;</span> +<span class="token string">&quot;%Y-%m-%d %H:%m:%S&quot;</span>
<span class="token number">2009</span>-02-13 <span class="token number">23</span>:02:30

<span class="token comment"># 普通转格式</span>
<span class="token function">date</span> -d <span class="token string">&quot;2009-12-12&quot;</span> +<span class="token string">&quot;%Y/%m/%d %H:%M.%S&quot;</span>
<span class="token number">2009</span>/12/12 00:00.00

<span class="token comment"># apache 格式转换</span>
<span class="token function">date</span> -d <span class="token string">&quot;Dec 5, 2009 12:00:37 AM&quot;</span> +<span class="token string">&quot;%Y-%m-%d %H:%M.%S&quot;</span>
<span class="token number">2009</span>-12-05 00:00.37

<span class="token comment"># 格式转换后时间游走</span>
<span class="token function">date</span> -d <span class="token string">&quot;Dec 5, 2009 12:00:37 AM 2 year ago&quot;</span> +<span class="token string">&quot;%Y-%m-%d %H:%M.%S&quot;</span>
<span class="token number">2007</span>-12-05 00:00.37

<span class="token comment"># 加减操作</span>
<span class="token function">date</span> +%Y%m%d                   <span class="token comment"># 显示前天年月日</span>
<span class="token function">date</span> -d <span class="token string">&quot;+1 day&quot;</span> +%Y%m%d       <span class="token comment"># 显示前一天的日期</span>
<span class="token function">date</span> -d <span class="token string">&quot;-1 day&quot;</span> +%Y%m%d       <span class="token comment"># 显示后一天的日期</span>
<span class="token function">date</span> -d <span class="token string">&quot;-1 month&quot;</span> +%Y%m%d     <span class="token comment"># 显示上一月的日期</span>
<span class="token function">date</span> -d <span class="token string">&quot;+1 month&quot;</span> +%Y%m%d     <span class="token comment"># 显示下一月的日期</span>
<span class="token function">date</span> -d <span class="token string">&quot;-1 year&quot;</span> +%Y%m%d      <span class="token comment"># 显示前一年的日期</span>
<span class="token function">date</span> -d <span class="token string">&quot;+1 year&quot;</span> +%Y%m%d      <span class="token comment"># 显示下一年的日期</span>

<span class="token comment"># 设定时间</span>
<span class="token function">date</span> -s                        <span class="token comment"># 设置当前时间，只有root权限才能设置，其他只能查看</span>
<span class="token function">date</span> -s <span class="token number">20120523</span>               <span class="token comment"># 设置成20120523，这样会把具体时间设置成空00:00:00</span>
<span class="token function">date</span> -s 01:01:01               <span class="token comment"># 设置具体时间，不会对日期做更改</span>
<span class="token function">date</span> -s <span class="token string">&quot;01:01:01 2012-05-23&quot;</span>  <span class="token comment"># 这样可以设置全部时间</span>
<span class="token function">date</span> -s <span class="token string">&quot;01:01:01 20120523&quot;</span>    <span class="token comment"># 这样可以设置全部时间</span>
<span class="token function">date</span> -s <span class="token string">&quot;2012-05-23 01:01:01&quot;</span>  <span class="token comment"># 这样可以设置全部时间</span>
<span class="token function">date</span> -s <span class="token string">&quot;20120523 01:01:01&quot;</span>    <span class="token comment"># 这样可以设置全部时间</span>

<span class="token comment"># 有时需要检查一组命令花费的时间</span>
<span class="token comment">#!/bin/bash</span>

<span class="token assign-left variable">start</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>
nmap man.linuxde.net <span class="token operator">&amp;&gt;</span> /dev/null

<span class="token assign-left variable">end</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>
<span class="token assign-left variable">difference</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span> end <span class="token operator">-</span> start <span class="token variable">))</span></span>
<span class="token builtin class-name">echo</span> <span class="token variable">$difference</span> seconds.
</code></pre></div><h3 id="_2-6-mount"><a href="#_2-6-mount" class="header-anchor">#</a> 2.6. mount</h3> <blockquote><p>mount 命令用于挂载文件系统到指定的挂载点。此命令的最常用于挂载 cdrom，使我们可以访问 cdrom 中的数据，因为你将光盘插入 cdrom 中，Linux 并不会自动挂载，必须使用 Linux mount 命令来手动完成挂载。</p> <p>参考：http://man.linuxde.net/mount &gt; https://blog.csdn.net/weishujie000/article/details/76531924</p></blockquote> <p>示例：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 将 /dev/hda1 挂在 /mnt 之下</span>
<span class="token function">mount</span> /dev/hda1 /mnt

<span class="token comment"># 将 /dev/hda1 用唯读模式挂在 /mnt 之下</span>
<span class="token function">mount</span> -o ro /dev/hda1 /mnt

<span class="token comment"># 将 /tmp/image.iso 这个光碟的 image 档使用 loop 模式挂在 /mnt/cdrom 之下</span>
<span class="token comment"># 用这种方法可以将一般网络上可以找到的 Linux ISO 在不烧录成光碟的情况下检视其内容</span>
<span class="token function">mount</span> -o loop /tmp/image.iso /mnt/cdrom
</code></pre></div><h3 id="_2-7-umount"><a href="#_2-7-umount" class="header-anchor">#</a> 2.7. umount</h3> <blockquote><p>umount 命令用于卸载已经挂载的文件系统。利用设备名或挂载点都能 umount 文件系统，不过最好还是通过挂载点卸载，以免使用绑定挂载（一个设备，多个挂载点）时产生混乱。</p> <p>参考：http://man.linuxde.net/umount</p></blockquote> <p>示例：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 通过设备名卸载</span>
<span class="token function">umount</span> -v /dev/sda1
/dev/sda1 umounted

<span class="token comment"># 通过挂载点卸载</span>
<span class="token function">umount</span> -v /mnt/mymount/
/tmp/diskboot.img umounted
</code></pre></div><h3 id="_2-8-ps"><a href="#_2-8-ps" class="header-anchor">#</a> 2.8. ps</h3> <blockquote><p>ps 命令用于报告当前系统的进程状态。可以搭配 kill 指令随时中断、删除不必要的程序。ps 命令是最基本同时也是非常强大的进程查看命令，使用该命令可以确定有哪些进程正在运行和运行的状态、进程是否结束、进程有没有僵死、哪些进程占用了过多的资源等等，总之大部分信息都是可以通过执行该命令得到的。</p> <p>参考：http://man.linuxde.net/ps</p></blockquote> <p>示例：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 按内存资源的使用量对进程进行排序</span>
<span class="token function">ps</span> aux <span class="token operator">|</span> <span class="token function">sort</span> -rnk <span class="token number">4</span>

<span class="token comment"># 按 CPU 资源的使用量对进程进行排序</span>
<span class="token function">ps</span> aux <span class="token operator">|</span> <span class="token function">sort</span> -nk <span class="token number">3</span>
</code></pre></div><h3 id="_2-9-kill"><a href="#_2-9-kill" class="header-anchor">#</a> 2.9. kill</h3> <blockquote><p>kill 命令用来删除执行中的程序或工作。kill 可将指定的信息送至程序。预设的信息为 SIGTERM(15),可将指定程序终止。若仍无法终止该程序，可使用 SIGKILL(9) 信息尝试强制删除程序。程序或工作的编号可利用 ps 指令或 job 指令查看。</p> <p>参考：http://man.linuxde.net/kill</p></blockquote> <p>示例：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 列出所有信号名称</span>
 <span class="token function">kill</span> -l
 <span class="token number">1</span><span class="token punctuation">)</span> SIGHUP       <span class="token number">2</span><span class="token punctuation">)</span> SIGINT       <span class="token number">3</span><span class="token punctuation">)</span> SIGQUIT      <span class="token number">4</span><span class="token punctuation">)</span> SIGILL
 <span class="token number">5</span><span class="token punctuation">)</span> SIGTRAP      <span class="token number">6</span><span class="token punctuation">)</span> SIGABRT      <span class="token number">7</span><span class="token punctuation">)</span> SIGBUS       <span class="token number">8</span><span class="token punctuation">)</span> SIGFPE
 <span class="token number">9</span><span class="token punctuation">)</span> SIGKILL     <span class="token number">10</span><span class="token punctuation">)</span> SIGUSR1     <span class="token number">11</span><span class="token punctuation">)</span> SIGSEGV     <span class="token number">12</span><span class="token punctuation">)</span> SIGUSR2
<span class="token number">13</span><span class="token punctuation">)</span> SIGPIPE     <span class="token number">14</span><span class="token punctuation">)</span> SIGALRM     <span class="token number">15</span><span class="token punctuation">)</span> SIGTERM     <span class="token number">16</span><span class="token punctuation">)</span> SIGSTKFLT
<span class="token number">17</span><span class="token punctuation">)</span> SIGCHLD     <span class="token number">18</span><span class="token punctuation">)</span> SIGCONT     <span class="token number">19</span><span class="token punctuation">)</span> SIGSTOP     <span class="token number">20</span><span class="token punctuation">)</span> SIGTSTP
<span class="token number">21</span><span class="token punctuation">)</span> SIGTTIN     <span class="token number">22</span><span class="token punctuation">)</span> SIGTTOU     <span class="token number">23</span><span class="token punctuation">)</span> SIGURG      <span class="token number">24</span><span class="token punctuation">)</span> SIGXCPU
<span class="token number">25</span><span class="token punctuation">)</span> SIGXFSZ     <span class="token number">26</span><span class="token punctuation">)</span> SIGVTALRM   <span class="token number">27</span><span class="token punctuation">)</span> SIGPROF     <span class="token number">28</span><span class="token punctuation">)</span> SIGWINCH
<span class="token number">29</span><span class="token punctuation">)</span> SIGIO       <span class="token number">30</span><span class="token punctuation">)</span> SIGPWR      <span class="token number">31</span><span class="token punctuation">)</span> SIGSYS      <span class="token number">34</span><span class="token punctuation">)</span> SIGRTMIN
<span class="token number">35</span><span class="token punctuation">)</span> SIGRTMIN+1  <span class="token number">36</span><span class="token punctuation">)</span> SIGRTMIN+2  <span class="token number">37</span><span class="token punctuation">)</span> SIGRTMIN+3  <span class="token number">38</span><span class="token punctuation">)</span> SIGRTMIN+4
<span class="token number">39</span><span class="token punctuation">)</span> SIGRTMIN+5  <span class="token number">40</span><span class="token punctuation">)</span> SIGRTMIN+6  <span class="token number">41</span><span class="token punctuation">)</span> SIGRTMIN+7  <span class="token number">42</span><span class="token punctuation">)</span> SIGRTMIN+8
<span class="token number">43</span><span class="token punctuation">)</span> SIGRTMIN+9  <span class="token number">44</span><span class="token punctuation">)</span> SIGRTMIN+10 <span class="token number">45</span><span class="token punctuation">)</span> SIGRTMIN+11 <span class="token number">46</span><span class="token punctuation">)</span> SIGRTMIN+12
<span class="token number">47</span><span class="token punctuation">)</span> SIGRTMIN+13 <span class="token number">48</span><span class="token punctuation">)</span> SIGRTMIN+14 <span class="token number">49</span><span class="token punctuation">)</span> SIGRTMIN+15 <span class="token number">50</span><span class="token punctuation">)</span> SIGRTMAX-14
<span class="token number">51</span><span class="token punctuation">)</span> SIGRTMAX-13 <span class="token number">52</span><span class="token punctuation">)</span> SIGRTMAX-12 <span class="token number">53</span><span class="token punctuation">)</span> SIGRTMAX-11 <span class="token number">54</span><span class="token punctuation">)</span> SIGRTMAX-10
<span class="token number">55</span><span class="token punctuation">)</span> SIGRTMAX-9  <span class="token number">56</span><span class="token punctuation">)</span> SIGRTMAX-8  <span class="token number">57</span><span class="token punctuation">)</span> SIGRTMAX-7  <span class="token number">58</span><span class="token punctuation">)</span> SIGRTMAX-6
<span class="token number">59</span><span class="token punctuation">)</span> SIGRTMAX-5  <span class="token number">60</span><span class="token punctuation">)</span> SIGRTMAX-4  <span class="token number">61</span><span class="token punctuation">)</span> SIGRTMAX-3  <span class="token number">62</span><span class="token punctuation">)</span> SIGRTMAX-2
<span class="token number">63</span><span class="token punctuation">)</span> SIGRTMAX-1  <span class="token number">64</span><span class="token punctuation">)</span> SIGRTMAX

<span class="token comment"># 先用 ps 查找进程，然后用 kill 杀掉</span>
<span class="token function">ps</span> -ef <span class="token operator">|</span> <span class="token function">grep</span> <span class="token function">vim</span>
root      <span class="token number">3268</span>  <span class="token number">2884</span>  <span class="token number">0</span> <span class="token number">16</span>:21 pts/1    00:00:00 <span class="token function">vim</span> install.log
root      <span class="token number">3370</span>  <span class="token number">2822</span>  <span class="token number">0</span> <span class="token number">16</span>:21 pts/0    00:00:00 <span class="token function">grep</span> <span class="token function">vim</span>

<span class="token function">kill</span> <span class="token number">3268</span>
<span class="token function">kill</span> <span class="token number">3268</span>
-bash: kill: <span class="token punctuation">(</span><span class="token number">3268</span><span class="token punctuation">)</span> - 没有那个进程
</code></pre></div><h3 id="_2-10-systemctl"><a href="#_2-10-systemctl" class="header-anchor">#</a> 2.10. systemctl</h3> <blockquote><p>systemctl 命令是系统服务管理器指令，它实际上将 service 和 chkconfig 这两个命令组合到一起。</p> <p>参考：http://man.linuxde.net/systemctl</p></blockquote> <p>示例：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 1.启动 nfs 服务</span>
systemctl start nfs-server.service

<span class="token comment"># 2.设置开机自启动</span>
systemctl <span class="token builtin class-name">enable</span> nfs-server.service

<span class="token comment"># 3.停止开机自启动</span>
systemctl disable nfs-server.service

<span class="token comment"># 4.查看服务当前状态</span>
systemctl status nfs-server.service

<span class="token comment"># 5.重新启动某服务</span>
systemctl restart nfs-server.service

<span class="token comment"># 6.查看所有已启动的服务</span>
systemctl list -units --type<span class="token operator">=</span>service

<span class="token comment"># 7. 开启防火墙 22 端口</span>
iptables -I INPUT -p tcp --dport <span class="token number">22</span> -j accept

<span class="token comment"># 8. 彻底关闭防火墙</span>
<span class="token function">sudo</span> systemctl status firewalld.service
<span class="token function">sudo</span> systemctl stop firewalld.service
<span class="token function">sudo</span> systemctl disable firewalld.service
</code></pre></div><h3 id="_2-11-service"><a href="#_2-11-service" class="header-anchor">#</a> 2.11. service</h3> <blockquote><p>service 命令是 Redhat Linux 兼容的发行版中用来控制系统服务的实用工具，它以启动、停止、重新启动和关闭系统服务，还可以显示所有系统服务的当前状态。</p> <p>参考：http://man.linuxde.net/service</p></blockquote> <p>示例：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">service</span> network status
配置设备：
lo eth0
当前的活跃设备：
lo eth0

<span class="token function">service</span> network restart
正在关闭接口 eth0：                                        <span class="token punctuation">[</span>  确定  <span class="token punctuation">]</span>
关闭环回接口：                                             <span class="token punctuation">[</span>  确定  <span class="token punctuation">]</span>
设置网络参数：                                             <span class="token punctuation">[</span>  确定  <span class="token punctuation">]</span>
弹出环回接口：                                             <span class="token punctuation">[</span>  确定  <span class="token punctuation">]</span>
弹出界面 eth0：                                            <span class="token punctuation">[</span>  确定  <span class="token punctuation">]</span>
</code></pre></div><h3 id="_2-12-crontab"><a href="#_2-12-crontab" class="header-anchor">#</a> 2.12. crontab</h3> <blockquote><p>crontab 命令被用来提交和管理用户的需要周期性执行的任务，与 windows 下的计划任务类似，当安装完成操作系统后，默认会安装此服务工具，并且会自动启动 crond 进程，crond 进程每分钟会定期检查是否有要执行的任务，如果有要执行的任务，则自动执行该任务。</p> <p>参考：http://man.linuxde.net/crontab</p></blockquote> <p>示例：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 每 1 分钟执行一次 command</span>
* * * * * <span class="token builtin class-name">command</span>

<span class="token comment"># 每小时的第 3 和第 15 分钟执行</span>
<span class="token number">3,15</span> * * * * <span class="token builtin class-name">command</span>

<span class="token comment"># 在上午 8 点到 11 点的第 3 和第 15 分钟执行</span>
<span class="token number">3,15</span> <span class="token number">8</span>-11 * * * <span class="token builtin class-name">command</span>

<span class="token comment"># 每隔两天的上午 8 点到 11 点的第 3 和第 15 分钟执行</span>
<span class="token number">3,15</span> <span class="token number">8</span>-11 */2 * * <span class="token builtin class-name">command</span>

<span class="token comment"># 每个星期一的上午 8 点到 11 点的第 3 和第 15 分钟执行</span>
<span class="token number">3,15</span> <span class="token number">8</span>-11 * * <span class="token number">1</span> <span class="token builtin class-name">command</span>

<span class="token comment"># 每晚的 21:30 重启 smb</span>
<span class="token number">30</span> <span class="token number">21</span> * * * /etc/init.d/smb restart

<span class="token comment"># 每月 1、10、22 日的 4 : 45 重启 smb</span>
<span class="token number">45</span> <span class="token number">4</span> <span class="token number">1,10</span>,22 * * /etc/init.d/smb restart

<span class="token comment"># 每周六、周日的 1:10 重启 smb</span>
<span class="token number">10</span> <span class="token number">1</span> * * <span class="token number">6,0</span> /etc/init.d/smb restart

<span class="token comment"># 每天 18 : 00 至 23 : 00 之间每隔 30 分钟重启 smb</span>
<span class="token number">0,30</span> <span class="token number">18</span>-23 * * * /etc/init.d/smb restart

<span class="token comment"># 每星期六的晚上 11:00 pm 重启 smb</span>
<span class="token number">0</span> <span class="token number">23</span> * * <span class="token number">6</span> /etc/init.d/smb restart

<span class="token comment"># 每一小时重启 smb</span>
* */1 * * * /etc/init.d/smb restart

<span class="token comment"># 晚上 11 点到早上 7 点之间，每隔一小时重启 smb</span>
* <span class="token number">23</span>-7/1 * * * /etc/init.d/smb restart

<span class="token comment"># 每月的 4 号与每周一到周三的 11 点重启 smb</span>
<span class="token number">0</span> <span class="token number">11</span> <span class="token number">4</span> * mon-wed /etc/init.d/smb restart

<span class="token comment"># 一月一号的 4 点重启 smb</span>
<span class="token number">0</span> <span class="token number">4</span> <span class="token number">1</span> jan * /etc/init.d/smb restart

<span class="token comment"># 每小时执行`/etc/cron.hourly`目录内的脚本</span>
01 * * * * root run-parts /etc/cron.hourly
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/dunwu/linux-tutorial/edit/master/linux/cli/linux-cli-system.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/linux-tutorial/assets/js/app.6f4d68b8.js" defer></script><script src="/linux-tutorial/assets/js/4.2a06028f.js" defer></script><script src="/linux-tutorial/assets/js/29.b9183a65.js" defer></script><script src="/linux-tutorial/assets/js/5.c338e437.js" defer></script>
  </body>
</html>
